{
    "id": "org.qgis.qgis",
    "base": "io.qt.qtwebkit.BaseApp",
    "base-version": "5.15-21.08",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-21.08",
    "sdk": "org.kde.Sdk",
    "command": "qgis",
    "rename-icon": "qgis",
    "finish-args": [
        "--env=LD_LIBRARY_PATH=/app/lib:/app/grass78/lib",
        "--share=ipc",
        "--share=network",
        "--socket=wayland",
        "--socket=x11",
        "--filesystem=host",
        "--device=dri"
    ],
    "separate-locales": false,
    "build-options": {
        "env": {
            "PYTHONPATH": "/app/lib/python3.9/site-packages:/usr/lib/python3.9/site-packages"
        }
    },
    "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.la",
        "*.a",
        "bin/mysql*",
        "grass78/docs"
    ],
    "modules": [
        {
            "name": "qgis",
            "buildsystem": "cmake-ninja",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://qgis.org/downloads/qgis-3.28.1.tar.bz2",
                    "sha256": "09015bb68c45556ffe9d480272d24048e6276a6bf1c010fd77beae64329ff674",
                    "x-checker-data": {
                        "type": "anitya",
                        "project-id": 5779,
                        "url-template": "https://qgis.org/downloads/qgis-$version.tar.bz2",
                        "stable-only": true
                    }
                }
            ],
            "config-opts": [
                "-DWITH_3D=TRUE",
                "-DGRASS_PREFIX7=/app/grass78",
                "-DQWT_LIBRARY=/app/lib/libqwt.so",
                "-DSQLITE3_INCLUDE_DIR=/app/include",
                "-DSQLITE3_LIBRARY=/app/lib/libsqlite3.so",
                "-DUSE_OPENCL=ON",
                "-DWITH_PDAL=TRUE"
            ],
            "modules": [
                {
                    "name": "proj",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DBUILD_TESTING=OFF"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/OSGeo/PROJ.git",
                            "tag": "9.1.0"
                        }
                    ]
                },
                {
                    "name": "geos",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://download.osgeo.org/geos/geos-3.11.1.tar.bz2",
                            "sha256": "6d0eb3cfa9f92d947731cc75f1750356b3bdfc07ea020553daf6af1c768e0be2",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 13493,
                                "url-template": "http://download.osgeo.org/geos/geos-$version.tar.bz2",
                                "stable-only": true
                            }
                        }
                    ]
                },
                {
                    "name": "spatialindex",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://download.osgeo.org/libspatialindex/spatialindex-src-1.8.5.tar.bz2",
                            "sha256": "31ec0a9305c3bd6b4ad60a5261cba5402366dd7d1969a8846099717778e9a50a"
                        }
                    ]
                },
                {
                    "name": "minizip",
                    "subdir": "contrib/minizip",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://zlib.net/zlib-1.2.13.tar.gz",
                            "sha256": "b3a24de97a8fdbc835b9833169501030b8977031bcb54b3b3ac13740f846ab30"
                        },
                        {
                            "type": "shell",
                            "commands": [
                                "echo \"autoreconf -ifv $@\" > contrib/minizip/autogen.sh",
                                "chmod a+x contrib/minizip/autogen.sh"
                            ]
                        }
                    ]
                },
                {
                    "name": "spatialite",
                    "config-opts": [
                        "prefix=/app",
                        "--enable-libxml2"
                    ],
                    "rm-configure": true,
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://www.gaia-gis.it/gaia-sins/libspatialite-sources/libspatialite-5.0.1.tar.gz",
                            "sha256": "eecbc94311c78012d059ebc0fae86ea5ef6eecb13303e6e82b3753c1b3409e98"
                        },
                        {
                            "type": "script",
                            "dest-filename": "autogen.sh",
                            "commands": [
                                "autoreconf -vfi"
                            ]
                        }
                    ],
                    "modules": [
                        {
                            "name": "freexl",
                            "rm-configure": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "http://www.gaia-gis.it/gaia-sins/freexl-sources/freexl-1.0.6.tar.gz",
                                    "sha256": "3de8b57a3d130cb2881ea52d3aa9ce1feedb1b57b7daa4eb37f751404f90fc22"
                                },
                                {
                                    "type": "script",
                                    "dest-filename": "autogen.sh",
                                    "commands": [
                                        "AUTOMAKE=\"automake --foreign\" autoreconf -vfi"
                                    ]
                                }
                            ]
                        },
                        {
                            "name": "rttopo",
                            "sources": [
                                {
                                    "type": "git",
                                    "url": "https://git.osgeo.org/gitea/rttopo/librttopo.git",
                                    "commit": "98a8bdd0b2d13f6b685d0658b4bce15d46606a1a"
                                }
                            ]
                        },
                        {
                            "name": "sqlite3",
                            "config-opts": [
                                "--disable-static",
                                "--disable-amalgamation",
                                "--enable-rtree",
                                "--enable-json1",
                                "CFLAGS=-DSQLITE_ENABLE_COLUMN_METADATA=1"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://www.sqlite.org/2021/sqlite-autoconf-3360000.tar.gz",
                                    "sha256": "bd90c3eb96bee996206b83be7065c9ce19aef38c3f4fb53073ada0d0b69bbce3"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "postgresql",
                    "config-opts": [
                        "--disable-rpath",
                        "--with-openssl"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://ftp.postgresql.org/pub/source/v12.2/postgresql-12.2.tar.bz2",
                            "sha256": "ad1dcc4c4fc500786b745635a9e1eba950195ce20b8913f50345bb7d5369b5de"
                        }
                    ]
                },
                {
                    "name": "unixodbc",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://www.unixodbc.org/unixODBC-2.3.7.tar.gz",
                            "sha256": "45f169ba1f454a72b8fcbb82abd832630a3bf93baa84731cf2949f449e1e3e77"
                        }
                    ]
                },
                {
                    "name": "zstd",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DCMAKE_BUILD_TYPE=Release"
                    ],
                    "subdir": "build/cmake",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/facebook/zstd/releases/download/v1.5.2/zstd-1.5.2.tar.gz",
                            "sha256": "7c42d56fac126929a6a85dbc73ff1db2411d04f104fae9bdea51305663a83fd0",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 12083,
                                "url-template": "https://github.com/facebook/zstd/releases/download/v$version/zstd-$version.tar.gz",
                                "stable-only": true
                            }
                        }
                    ]
                },
                {
                    "name": "gdal",
                    "buildsystem": "cmake-ninja",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://download.osgeo.org/gdal/3.6.0/gdal-3.6.0.tar.xz",
                            "sha256": "f7afa4aa8d32d0799e011a9f573c6a67e9471f78e70d3d0d0b45b45c8c0c1a94",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 881,
                                "url-template": "http://download.osgeo.org/gdal/$version/gdal-$version.tar.xz",
                                "stable-only": true
                            }
                        }
                    ],
                    "modules": [
                        {
                            "name": "swig",
                            "config-opts": [
                                "--without-boost",
                                "--without-pcre",
                                "--without-alllang",
                                "--with-python3"
                            ],
                            "cleanup": [
                                "/bin",
                                "/share/swig"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "http://prdownloads.sourceforge.net/swig/swig-4.1.0.tar.gz",
                                    "sha256": "d6a9a8094e78f7cfb6f80a73cc271e1fe388c8638ed22668622c2c646df5bb3d",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 4919,
                                        "url-template": "http://prdownloads.sourceforge.net/swig/swig-$version.tar.gz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "xerces-c",
                            "no-autogen": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://dlcdn.apache.org//xerces/c/3/sources/xerces-c-3.2.4.tar.xz",
                                    "sha256": "075bc57940da0f9be6dd183c550c8ce0b9833e4550dc382048377a1a5e3b2bd9",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 5182,
                                        "url-template": "https://dlcdn.apache.org//xerces/c/$major/sources/xerces-c-$version.tar.xz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "szip",
                            "no-autogen": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://support.hdfgroup.org/ftp/lib-external/szip/2.1.1/src/szip-2.1.1.tar.gz",
                                    "sha256": "21ee958b4f2d4be2c9cabfa5e1a94877043609ce86fde5f286f105f7ff84d412",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 13633,
                                        "url-template": "https://support.hdfgroup.org/ftp/lib-external/szip/$version/src/szip-$version.tar.gz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "hdf5",
                            "no-autogen": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.12/hdf5-1.12.1/src/hdf5-1.12.1.tar.bz2",
                                    "sha256": "aaf9f532b3eda83d3d3adc9f8b40a9b763152218fa45349c3bc77502ca1f8f1c"
                                }
                            ]
                        },
                        {
                            "name": "uriparser",
                            "buildsystem": "cmake-ninja",
                            "config-opts": [
                                "-DURIPARSER_BUILD_TESTS=OFF",
                                "-DURIPARSER_BUILD_DOCS=OFF"
                            ],
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/uriparser/uriparser/releases/download/uriparser-0.9.7/uriparser-0.9.7.tar.bz2",
                                    "sha256": "d27dea0c8b6f6fb9798f07caedef1cd96a6e3fc5c6189596774e19afa7ddded7",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 10160,
                                        "url-template": "https://github.com/uriparser/uriparser/releases/download/uriparser-$version/uriparser-$version.tar.bz2",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "cfitsio",
                            "buildsystem": "simple",
                            "build-commands": [
                                "./configure --prefix=${FLATPAK_DEST} --enable-reentrant",
                                "make shared",
                                "make install"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://heasarc.gsfc.nasa.gov/FTP/software/fitsio/c/cfitsio-4.1.0.tar.gz",
                                    "sha256": "b367c695d2831958e7166921c3b356d5dfa51b1ecee505b97416ba39d1b6c17a"
                                }
                            ]
                        },
                        {
                            "name": "armadillo",
                            "buildsystem": "cmake-ninja",
                            "config-opts": [
                                "-DDETECT_HDF5=ON"
                            ],
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://sourceforge.net/projects/arma/files/armadillo-11.4.2.tar.xz",
                                    "sha256": "e6860134f1ac9656c6a1ccc74c74b75f8c5966ac8612841f2fbf0c91ce39f4e9",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 7006,
                                        "url-template": "https://sourceforge.net/projects/arma/files/armadillo-$version.tar.xz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "cryptopp",
                            "buildsystem": "simple",
                            "build-commands": [
                                "make shared all",
                                "make install PREFIX=${FLATPAK_DEST}"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/weidai11/cryptopp/archive/CRYPTOPP_8_7_0.tar.gz",
                                    "sha256": "8d6a4064b8e9f34cd3e838f5a12c40067ee7b95ee37d9173ec273cb0913e7ca2"
                                }
                            ]
                        },
                        {
                            "name": "boost",
                            "buildsystem": "simple",
                            "build-commands": [
                                "./bootstrap.sh --prefix=${FLATPAK_DEST}",
                                "./b2 -j ${FLATPAK_BUILDER_N_JOBS} headers",
                                "cp -r boost ${FLATPAK_DEST}/include/boost"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://downloads.sourceforge.net/project/boost/boost/1.73.0/boost_1_73_0.tar.bz2",
                                    "sha256": "4eb3b8d442b426dc35346235c8733b5ae35ba431690e38c6a8263dce9fcbb402"
                                }
                            ]
                        },
                        {
                            "name": "libkml",
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/libkml/libkml/archive/1.3.0.tar.gz",
                                    "sha256": "8892439e5570091965aaffe30b08631fdf7ca7f81f6495b4648f0950d7ea7963",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 10558,
                                        "url-template": "https://github.com/libkml/libkml/archive/$version.tar.gz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "netcdf",
                            "no-autogen": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/Unidata/netcdf-c/archive/v4.9.0.tar.gz",
                                    "sha256": "9f4cb864f3ab54adb75409984c6202323d2fc66c003e5308f3cdf224ed41c0a6",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 10354,
                                        "url-template": "https://github.com/Unidata/netcdf-c/archive/v$version.tar.gz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "openjpeg2",
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "git",
                                    "url": "https://github.com/uclouvain/openjpeg.git",
                                    "tag": "v2.5.0"
                                }
                            ],
                            "cleanup": [
                                "/bin",
                                "/include",
                                "/lib/openjpeg-*",
                                "/lib/pkgconfig"
                            ]
                        },
                        {
                            "name": "poppler",
                            "modules": [
                                {
                                    "name": "popplerdata",
                                    "buildsystem": "cmake-ninja",
                                    "builddir": true,
                                    "sources": [
                                        {
                                            "type": "archive",
                                            "url": "https://poppler.freedesktop.org/poppler-data-0.4.11.tar.gz",
                                            "sha256": "2cec05cd1bb03af98a8b06a1e22f6e6e1a65b1e2f3816cb3069bb0874825f08c"
                                        }
                                    ]
                                }
                            ],
                            "config-opts": [
                                "-DCMAKE_BUILD_TYPE=Release",
                                "-DENABLE_TESTING=OFF",
                                "-DENABLE_UNSTABLE_API_ABI_HEADERS=ON",
                                "-DENABLE_CPP=ON",
                                "-DENABLE_GLIB=OFF",
                                "-DENABLE_GOBJECT_INTROSPECTION=OFF",
                                "-DENABLE_UTILS=OFF",
                                "-DENABLE_LIBOPENJPEG=openjpeg2"
                            ],
                            "cleanup": [
                                "/bin",
                                "/share"
                            ],
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://poppler.freedesktop.org/poppler-21.11.0.tar.xz",
                                    "sha256": "31b76b5cac0a48612fdd154c02d9eca01fd38fb8eaa77c1196840ecdeb53a584"
                                }
                            ]
                        },
                        {
                            "name": "mysql-boost",
                            "config-opts": [
                                "-DCMAKE_BUILD_TYPE=Release",
                                "-DFORCE_INSOURCE_BUILD=1",
                                "-DWITH_EDITLINE=bundled",
                                "-DWITH_SSL=yes",
                                "-DWITH_UNIT_TESTS=OFF",
                                "-DWITHOUT_SERVER=ON"
                            ],
                            "buildsystem": "cmake-ninja",
                            "builddir": true,
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-boost-8.0.27.tar.gz",
                                    "md5": "80310c5a1b24145fa072927ab99a4c0d"
                                }
                            ]
                        },
                        {
                            "name": "python3-numpy",
                            "buildsystem": "simple",
                            "build-commands": [
                                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"numpy\" --no-build-isolation"
                            ],
                            "sources": [
                                {
                                    "type": "file",
                                    "url": "https://github.com/numpy/numpy/releases/download/v1.23.4/numpy-1.23.4.tar.gz",
                                    "sha256": "ed2cc92af0efad20198638c69bb0fc2870a58dabfba6eb722c933b48556c686c"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "pdal",
                    "config-opts": [
                        "-DCMAKE_BUILD_TYPE=Release",
                        "-DWITH_TESTS=OFF"
                    ],
                    "buildsystem": "cmake-ninja",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/PDAL/PDAL/releases/download/2.4.3/PDAL-2.4.3-src.tar.bz2",
                            "sha256": "3d2b00e87d177f6d01fee3dd3436cd9fc1f6d821fae40f36dccc07469d0d8226",
                            "x-checker-data": {
                                "type": "anitya",
                                "project-id": 138228,
                                "url-template": "https://github.com/PDAL/PDAL/releases/download/$version/PDAL-$version-src.tar.bz2",
                                "stable-only": true
                            }
                        }
                    ],
                    "modules": [
                        {
                            "name": "libgeotiff",
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/OSGeo/libgeotiff/releases/download/1.7.1/libgeotiff-1.7.1.tar.gz",
                                    "sha256": "05ab1347aaa471fc97347d8d4269ff0c00f30fa666d956baba37948ec87e55d6",
                                    "x-checker-data": {
                                        "type": "anitya",
                                        "project-id": 21361,
                                        "url-template": "https://github.com/OSGeo/libgeotiff/releases/download/$version/libgeotiff-$version.tar.gz",
                                        "stable-only": true
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "qca",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DBUILD_TESTS=OFF"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://download.kde.org/stable/qca/2.3.4/qca-2.3.4.tar.xz",
                            "sha256": "6b695881a7e3fd95f73aaee6eaeab96f6ad17e515e9c2b3d4b3272d7862ff5c4"
                        }
                    ]
                },
                {
                    "name": "qwt",
                    "buildsystem": "qmake",
                    "config-opts": [
                        "-after",
                        "QWT_INSTALL_PREFIX=/app"
                    ],
                    "cleanup": [
                        "/doc",
                        "/features",
                        "/plugins",
                        "/include",
                        "/lib/pkgconfig"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://sourceforge.net/projects/qwt/files/qwt/6.1.5/qwt-6.1.5.zip",
                            "sha256": "a1208783c2639101b11a9f359d98eaf007e95f7292f1c1df5514884dd8b4373d"
                        },
                        {
                            "type": "shell",
                            "commands": [
                                "sed 's/QWT_INSTALL_PREFIX\\s*=\\s*\\/usr\\/local\\/qwt-$$QWT_VERSION/QWT_INSTALL_PREFIX=\\/app/g' -i qwtconfig.pri",
                                "sed 's/#QWT_CONFIG\\s*+=\\s*QwtPkgConfig/QWT_CONFIG+=QwtPkgConfig/g' -i qwtconfig.pri"
                            ]
                        }
                    ]
                },
                {
                    "name": "libzip",
                    "buildsystem": "cmake-ninja",
                    "cleanup": [
                        "/bin",
                        "/include",
                        "/lib/pkgconfig",
                        "/share/man",
                        "/lib/*.la"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://libzip.org/download/libzip-1.6.1.tar.xz",
                            "sha256": "705dac7a671b3f440181481e607b0908129a9cf1ddfcba75d66436c0e7d33641"
                        }
                    ]
                },
                {
                    "name": "gsl",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "http://ftp.halifax.rwth-aachen.de/gnu/gsl/gsl-2.6.tar.gz",
                            "sha256": "b782339fc7a38fe17689cb39966c4d821236c28018b6593ddb6fd59ee40786a8"
                        }
                    ]
                },
                {
                    "name": "pyqt5",
                    "config-opts": [
                        "--disable-static",
                        "--enable-x11"
                    ],
                    "build-options": {
                        "env": {
                            "QMAKEPATH": "/app/lib"
                        }
                    },
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://files.pythonhosted.org/packages/28/6c/640e3f5c734c296a7193079a86842a789edb7988dca39eab44579088a1d1/PyQt5-5.15.2.tar.gz",
                            "sha256": "372b08dc9321d1201e4690182697c5e7ffb2e0770e6b4a45519025134b12e4fc"
                        },
                        {
                            "type": "script",
                            "commands": [
                                "python3 configure.py --assume-shared --confirm-license --no-designer-plugin --no-qml-plugin --sysroot=/app --qsci-api --qsci-api-destdir=/app/qsci --sipdir=/app/share/sip --sip=/app/bin/sip --sip-incdir=/app/include QMAKE_CFLAGS_RELEASE='-I/usr/include/python3.9/' QMAKE_CXXFLAGS_RELEASE='-I/usr/include/python3.9/'"
                            ],
                            "dest-filename": "configure"
                        }
                    ],
                    "modules": [
                        {
                            "name": "sip",
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://www.riverbankcomputing.com/static/Downloads/sip/4.19.25/sip-4.19.25.tar.gz",
                                    "sha256": "b39d93e937647807bac23579edbff25fe46d16213f708370072574ab1f1b4211"
                                },
                                {
                                    "type": "script",
                                    "commands": [
                                        "python3 configure.py --sip-module PyQt5.sip -b ${FLATPAK_DEST}/bin -d ${FLATPAK_DEST}/lib/python3.9/site-packages -e ${FLATPAK_DEST}/include -v ${FLATPAK_DEST}/share/sip --stubsdir=${FLATPAK_DEST}/lib/python3.9/site-packages"
                                    ],
                                    "dest-filename": "configure"
                                }
                            ],
                            "cleanup": [
                                "/bin",
                                "/include"
                            ]
                        }
                    ]
                },
                {
                    "name": "qscintilla",
                    "buildsystem": "simple",
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://www.riverbankcomputing.com/static/Downloads/QScintilla/2.11.6/QScintilla-2.11.6.tar.gz",
                            "sha256": "e7346057db47d2fb384467fafccfcb13aa0741373c5d593bc72b55b2f0dd20a7"
                        }
                    ],
                    "build-commands": [
                        "sed -e 's|\\(target.path\\) = .*|\\1 = /app/lib|' -i Qt4Qt5/qscintilla.pro",
                        "sed -e 's|\\(header.path\\) = .*|\\1 = /app/include|' -i Qt4Qt5/qscintilla.pro",
                        "sed -e 's|\\(trans.path\\) = .*|\\1 = /app/share/qt5/translations|' -i Qt4Qt5/qscintilla.pro",
                        "sed -e 's|\\(qsci.path\\) = .*|\\1 = /app/share/qt5|' -i Qt4Qt5/qscintilla.pro",
                        "sed -e 's|\\(features.path\\) = .*|\\1 = /app/lib/qt5/mkspecs/features|' -i Qt4Qt5/qscintilla.pro",
                        "sed -e \"s|qmake = {'CONFIG': 'qscintilla2'}|qmake = {'CONFIG': 'qscintilla2', 'QT': 'widgets printsupport'}|\" -i Python/configure.py",
                        "cd Qt4Qt5 && qmake && make -j ${FLATPAK_BUILDER_N_JOBS:-`nproc`} && make install",
                        "cd Python && python3 configure.py --pyqt=PyQt5 -n ../Qt4Qt5/ -o ../Qt4Qt5/ --pyqt-sipdir=/app/share/sip --destdir=/app/lib/python3.9/site-packages/PyQt5 --apidir=/app/qsci/api/python --no-stubs --no-dist-info",
                        "echo \"LIBS += /app/lib/libqscintilla2_qt5.so\" >> Python/Qsci/Qsci.pro",
                        "cd Python && make -j ${FLATPAK_BUILDER_N_JOBS:-`nproc`} && make install"
                    ]
                },
                {
                    "name": "python-six",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} six"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/71/39/171f1c67cd00715f190ba0b100d606d440a28c93c7714febeca8b79af85e/six-1.16.0.tar.gz",
                            "sha256": "1e61c37477a1626458e36f7b1d82aa5c9b094fa4802892072e49de9c60c4c926"
                        }
                    ]
                },
                {
                    "name": "python-future",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} future"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/45/0b/38b06fd9b92dc2b68d58b75f900e97884c45bedd2ff83203d933cf5851c9/future-0.18.2.tar.gz",
                            "sha256": "b1bead90b70cf6ec3f0710ae53a525360fa360d306a86583adc6bf83a4db537d"
                        }
                    ]
                },
                {
                    "name": "python-setuptools",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 setup.py build",
                        "python3 setup.py install --prefix=/app --root=/ --optimize=1"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/pypa/setuptools.git",
                            "tag": "v65.5.1"
                        }
                    ]
                },
                {
                    "name": "pyproj",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 setup.py build",
                        "python3 setup.py install --prefix=/app --root=/ --optimize=1"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/pyproj4/pyproj.git",
                            "tag": "3.4.0"
                        }
                    ]
                },
                {
                    "name": "PyYAML",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 setup.py install --prefix=/app --root=/"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://files.pythonhosted.org/packages/36/2b/61d51a2c4f25ef062ae3f74576b01638bebad5e045f747ff12643df63844/PyYAML-6.0.tar.gz",
                            "sha256": "68fb519c14306fec9720a2a5b45bc9f0c8d1b9c72adf45c37baedfcd949c35a2"
                        }
                    ]
                },
                {
                    "name": "python-owslib",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --prefix=/app *dateutil-*",
                        "pip3 install --prefix=/app pytz-*",
                        "pip3 install --prefix=/app urllib3-*",
                        "pip3 install --prefix=/app idna-*",
                        "pip3 install --prefix=/app certifi-*",
                        "pip3 install --prefix=/app charset-normalizer-*",
                        "pip3 install --prefix=/app requests-*",
                        "pip3 install --prefix=/app owslib*"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/36/7a/87837f39d0296e723bb9b62bbb257d0355c7f6128853c78955f57342a56d/python_dateutil-2.8.2-py2.py3-none-any.whl",
                            "sha256": "961d03dc3453ebbc59dbdea9e4e11c5651520a876d0f4db161e8674aae935da9"
                        },
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/85/ac/92f998fc52a70afd7f6b788142632afb27cd60c8c782d1452b7466603332/pytz-2022.6-py2.py3-none-any.whl",
                            "sha256": "222439474e9c98fced559f1709d89e6c9cbf8d79c794ff3eb9f8800064291427"
                        },
                        {
                            "type": "file",
                            "url": "https://pypi.io/packages/source/c/certifi/certifi-2022.9.24.tar.gz",
                            "sha256": "0d9c601124e5a6ba9712dbc60d9c53c21e34f5f641fe83002317394311bdce14"
                        },
                        {
                            "type": "file",
                            "url": "https://pypi.io/packages/source/i/idna/idna-3.3.tar.gz",
                            "sha256": "9d643ff0a55b762d5cdb124b8eaa99c66322e2157b69160bc32796e824360e6d"
                        },
                        {
                            "type": "file",
                            "url": "https://pypi.io/packages/source/c/charset-normalizer/charset-normalizer-2.1.1.tar.gz",
                            "sha256": "5a3d016c7c547f69d6f81fb0db9449ce888b418b5b9952cc5e6e66843e9dd845"
                        },
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/6f/de/5be2e3eed8426f871b170663333a0f627fc2924cc386cd41be065e7ea870/urllib3-1.26.12-py2.py3-none-any.whl",
                            "sha256": "b930dd878d5a8afb066a637fbb35144fe7901e3b209d1cd4f524bd0e9deee997"
                        },
                        {
                            "type": "file",
                            "url": "https://github.com/psf/requests/releases/download/v2.28.1/requests-2.28.1-py3-none-any.whl",
                            "sha256": "8fefa2a1a1365bf5520aac41836fbee479da67864514bdb821f31ce07ce65349"
                        },
                        {
                            "type": "file",
                            "url": "https://github.com/geopython/OWSLib/archive/refs/tags/0.27.2.tar.gz",
                            "sha256": "3a8461e39fb9c5be5abb1f5a07fffbf688300c970ec553f256c9e664603657b1",
                            "dest-filename": "owslib.tar.gz"
                        }
                    ]
                },
                {
                    "name": "python-psycopg2",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 setup.py build",
                        "python3 setup.py install --prefix=/app --root=/ --optimize=1"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/psycopg/psycopg2.git",
                            "tag": "2_9_5"
                        }
                    ]
                },
                {
                    "name": "gisgrass",
                    "cleanup": [
                        "/include",
                        "/lib/pkgconfig",
                        "/share/man",
                        "/lib/*.la"
                    ],
                    "config-opts": [
                        "--prefix=/app",
                        "--with-freetype-includes=/usr/include/freetype2",
                        "--with-readline",
                        "--with-pthread",
                        "--with-nls",
                        "--with-geos",
                        "--with-sqlite=yes",
                        "--with-python=yes",
                        "--with-postgres"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/OSGeo/grass.git",
                            "tag": "8.2.0"
                        }
                    ],
                    "modules": [
                        "shared-modules/glu/glu-9.json"
                    ]
                },
                {
                    "name": "saga-gis",
                    "subdir": "saga-gis",
                    "config-opts": [
                        "--enable-python",
                        "--with-python_exec_prefix=/app",
                        "--disable-odbc"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://git.code.sf.net/p/saga-gis/code",
                            "tag": "release-8.2.0"
                        },
                        {
                            "type": "shell",
                            "commands": [
                                "echo \"autoreconf -vfi $@\" > saga-gis/autogen.sh",
                                "chmod a+x saga-gis/autogen.sh"
                            ]
                        }
                    ],
                    "modules": [
                        {
                            "name": "wxWidgets",
                            "cleanup": [
                                "/bin",
                                "/share/bakefile"
                            ],
                            "config-opts": [
                                "--with-opengl",
                                "--with-libjpeg",
                                "--with-libtiff",
                                "--with-libpng",
                                "--with-zlib",
                                "--disable-sdltest",
                                "--enable-unicode",
                                "--enable-display",
                                "--enable-propgrid",
                                "--disable-webview",
                                "--disable-webviewwebkit",
                                "--with-expat=builtin",
                                "--with-libiconv=/usr"
                            ],
                            "build-options": {
                                "cxxflags": "-std=c++0x"
                            },
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://github.com/wxWidgets/wxWidgets/releases/download/v3.2.1/wxWidgets-3.2.1.tar.bz2",
                                    "sha256": "c229976bb413eb88e45cb5dfb68b27890d450149c09b331abd751e7ae0f5fa66"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "python3-markupsafe",
                    "buildsystem": "simple",
                    "ensure-writable": [
                        "/lib/python*/site-packages/easy-install.pth"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://files.pythonhosted.org/packages/1d/97/2288fe498044284f39ab8950703e88abbac2abbdf65524d576157af70556/MarkupSafe-2.1.1.tar.gz",
                            "sha256": "7f91197cc9e48f989d12e4e6fbc46495c446636dfc81b9ccf50bb0ec74b91d4b"
                        }
                    ],
                    "build-commands": [
                        "python3 setup.py build",
                        "python3 setup.py install --prefix /app"
                    ]
                },
                {
                    "name": "python3-jinja2",
                    "buildsystem": "simple",
                    "build-commands": [
                        "pip3 install --prefix=/app Jinja2-3.1.2-py3-none-any.whl"
                    ],
                    "sources": [
                        {
                            "type": "file",
                            "url": "https://files.pythonhosted.org/packages/bc/c3/f068337a370801f372f2f8f6bad74a5c140f6fda3d9de154052708dd3c65/Jinja2-3.1.2-py3-none-any.whl",
                            "sha256": "6088930bfe239f0e6710546ab9c19c9ef35e29792895fed6e6e31a023a182a61"
                        }
                    ]
                },
                {
                    "name": "python3-pygments",
                    "buildsystem": "simple",
                    "build-commands": [
                        "python3 setup.py install --prefix=/app --root=/ --optimize=1"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/pygments/pygments.git",
                            "tag": "2.13.0"
                        }
                    ]
                },
                {
                    "name": "exiv2",
                    "cleanup": [
                        "/bin"
                    ],
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DCMAKE_BUILD_TYPE=Release",
                        "-DEXIV2_BUILD_EXIV2_COMMAND=OFF",
                        "-DEXIV2_BUILD_SAMPLES=OFF"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/Exiv2/exiv2.git",
                            "tag": "v0.27.5"
                        }
                    ]
                },
                {
                    "name": "protobuf",
                    "cleanup": [
                        "protoc",
                        "/bin",
                        "/doc",
                        "/lib/plugins"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/protocolbuffers/protobuf/releases/download/v21.9/protobuf-cpp-3.21.9.tar.gz",
                            "sha256": "bddc5dd16da45c89a510704683e02ba08c30af78fe092d255cf25b9b01259405"
                        }
                    ]
                },
                {
                    "name": "qtkeychain",
                    "buildsystem": "cmake-ninja",
                    "config-opts": [
                        "-DCMAKE_INSTALL_LIBDIR=/app/lib",
                        "-DLIB_INSTALL_DIR=/app/lib",
                        "-DBUILD_TRANSLATIONS=NO"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/frankosterfeld/qtkeychain/archive/v0.13.2.tar.gz",
                            "sha256": "20beeb32de7c4eb0af9039b21e18370faf847ac8697ab3045906076afbc4caa5"
                        }
                    ],
                    "modules": [
                        {
                            "name": "libsecret",
                            "buildsystem": "meson",
                            "config-opts": [
                                "-Dmanpage=false",
                                "-Dvapi=false",
                                "-Dgtk_doc=false",
                                "-Dintrospection=false"
                            ],
                            "sources": [
                                {
                                    "type": "archive",
                                    "url": "https://download.gnome.org/sources/libsecret/0.20/libsecret-0.20.5.tar.xz",
                                    "sha256": "3fb3ce340fcd7db54d87c893e69bfc2b1f6e4d4b279065ffe66dac9f0fd12b4d",
                                    "x-checker-data": {
                                        "type": "gnome",
                                        "name": "libsecret",
                                        "stable-only": true
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "name": "env-python",
            "buildsystem": "simple",
            "build-commands": [
                "ln -s /usr/bin/python3 /app/bin/python"
            ]
        }
    ]
}
